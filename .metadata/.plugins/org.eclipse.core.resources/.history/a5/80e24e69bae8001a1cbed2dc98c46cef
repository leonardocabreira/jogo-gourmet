package controller;

import model.ElementoGourmet;
import util.FactoryGame;
import view.Mensageiro;

public class ControllerEngineGame {

    private ElementoGourmet inicio;
    private final int SIM = 0;
    private final int NAO = 1;

    public ControllerEngineGame() {
        inicio = FactoryGame.factoryGame();
    }

   
    public void start() {
        
        proximo(inicio);
       
    }

    public ElementoGourmet proximo(ElementoGourmet atual) {
    	
        int escolha = Mensageiro.Perguntar(atual.getDescricao());
       
        ElementoGourmet novoRamo;
        
        switch (escolha) {
            case SIM:
                if (atual.getSim() == null) {
                    Mensageiro.mensagem("Acertei Novamente!", "Jogo Gourmet", "OK", "Cancelar");
                    novoRamo = null;
                    System.out.println("MOSTREI O ACERTEI");
                } else {
                    novoRamo = proximo(atual.getSim());
                    if (novoRamo != null) {
                        atual.setSim(novoRamo);
                        novoRamo = null;
                    }
                   
                }
                break;
                
            case NAO:
                if (atual.getNao() == null) {
                    novoRamo = criarNovoRamo(atual);
                } else {
                    novoRamo = proximo(atual.getNao());
                    if (novoRamo != null) {
                        atual.setNao(novoRamo);
                        novoRamo = null;
                    }
                }
                break;
            default:
                novoRamo = null;
                break;
        }
        

        return novoRamo;
    }

    public ElementoGourmet criarNovoRamo(ElementoGourmet atual) {
    	
        String novoDescricao = Mensageiro.desistir();
       
        if (novoDescricao != null) {
            novoDescricao = novoDescricao.trim();
            if (!novoDescricao.equals("")) {
               
                ElementoGourmet novo = new ElementoGourmet();
                novo.setDescricao(novoDescricao);
                novo.setSim(null);
                novo.setNao(null);

                String difEntreNovoEAtualDescricao = Mensageiro.completeAFrase(novoDescricao, atual.getDescricao());
              

                ElementoGourmet difEntreNovoEAtual = new ElementoGourmet();
                difEntreNovoEAtual.setDescricao(difEntreNovoEAtualDescricao);
                difEntreNovoEAtual.setSim(novo);
                difEntreNovoEAtual.setNao(atual);

                return difEntreNovoEAtual;
            }
        }
        return null;

    }
}
