package controller;

import model.No;
import util.FactoryGame;
import view.Mensageiro;

public class ControllerEngineGame {

	private No raiz;

	private final int SIM = 0;
	private final int NAO = 1;

	public ControllerEngineGame() {
		raiz = FactoryGame.factoryGame();
	}

	public void start() {

		proximo(raiz);

	}

	public No proximo(No atual) {

		int escolha = Mensageiro.Perguntar(atual.getDescricao());
		
		No novoRamo;
		
		switch (escolha) {
		case SIM:
			if (atual.getDireita() == null) {
				Mensageiro.mensagem("Acertei Novamente!", "Jogo Gourmet", "OK", "Cancelar");
				novoRamo = null;
				System.out.println("MOSTREI O ACERTEI");
			} else {
				novoRamo = proximo(atual.getDireita());
				if (novoRamo != null) {
					atual.setDireita(novoRamo);
					novoRamo = null;
				}

			}
			break;

		case NAO:
			if (atual.getEsquerda() == null) {
				novoRamo = criarNovoRamo(atual);
			} else {
				novoRamo = proximo(atual.getEsquerda());
				if (novoRamo != null) {
					atual.setEsquerda(novoRamo);
					novoRamo = null;
				}
			}
			break;
		default:
			novoRamo = null;
			break;
		}

		return novoRamo;
	}

	public No criarNovoRamo(No atual) {

		String novoValor = Mensageiro.desistir();

		if (novoValor != null) {
			novoValor = novoValor.trim();

			if (!novoValor.equals("")) {

				No novo = new No(novoValor, null, null);
				String caracteristica = Mensageiro.completeAFrase(novoValor, atual.getDescricao());

				No novoRamo = new No(caracteristica, novo, atual);

				return novoRamo;
			}
		}
		return null;

	}
}
